{"_path":"/essay/24.pytorch环境","_dir":"essay","_draft":false,"_partial":false,"_locale":"","title":"pytorch环境","description":"深度学习，从pytorch开始\npytorch中文手册\nhttps://github.com/zergtant/pytorch-handbook","subtitle":"pytorch environment","index":24,"date":"2023-03-25 00:00:00","lunar_date":"闰二初四","year":"2023","month":"03","month_en":"Mar","day":"25","tag":"技术","tag_en":"TECH","cover":"/img/rabbit/024.jpg","categories":"python","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"深度学习，从pytorch开始\npytorch中文手册\n"},{"type":"element","tag":"a","props":{"href":"https://github.com/zergtant/pytorch-handbook","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/zergtant/pytorch-handbook"}]}]},{"type":"element","tag":"h1","props":{"id":"linux下"},"children":[{"type":"text","value":"Linux下"}]},{"type":"element","tag":"h2","props":{"id":"安装anaconda"},"children":[{"type":"text","value":"安装Anaconda"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在archlinux下"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"# 完全版\nyay -S annaconda\n# 本人安装的轻量版\nyay -S miniconda\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# 完全版\nyay -S annaconda\n# 本人安装的轻量版\nyay -S miniconda\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"按照提示"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"If your shell is Bash or a Bourne variant, enable conda for the current user with\n\n    $ source /opt/miniconda/etc/profile.d/conda.sh\nYou could also add the above line to `~/.bashrc`\n\nor, for all users, enable conda with\n\n    $ sudo ln -s /opt/miniconda/etc/profile.d/conda.sh /etc/profile.d/conda.sh\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"If your shell is Bash or a Bourne variant, enable conda for the current user with\n\n    $ source /opt/miniconda/etc/profile.d/conda.sh\nYou could also add the above line to `~/.bashrc`\n\nor, for all users, enable conda with\n\n    $ sudo ln -s /opt/miniconda/etc/profile.d/conda.sh /etc/profile.d/conda.sh\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在终端输入以下命令以启用conda"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"source /opt/miniconda/etc/profile.d/conda.sh\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"source /opt/miniconda/etc/profile.d/conda.sh\n"}]}]},{"type":"element","tag":"h2","props":{"id":"创建conda环境"},"children":[{"type":"text","value":"创建conda环境"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"# 查看 python 版本\npython\n# 使用 exit() 或 Ctrl+D 退出 python 环境\n\n# 创建 conda 环境\n# ( our_envName 是你定义的环境名，这里使用 pytorch )\n# ( x.x 是指定的 python 版本，我这里是 3.10 )\nconda create -n your_envName python=x.x\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# 查看 python 版本\npython\n# 使用 exit() 或 Ctrl+D 退出 python 环境\n\n# 创建 conda 环境\n# ( our_envName 是你定义的环境名，这里使用 pytorch )\n# ( x.x 是指定的 python 版本，我这里是 3.10 )\nconda create -n your_envName python=x.x\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"激活环境"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"# 激活环境，pytorch 是你之前定义的环境名\nconda activate pytorch\n# 取消激活状态\nconda deactivate\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# 激活环境，pytorch 是你之前定义的环境名\nconda activate pytorch\n# 取消激活状态\nconda deactivate\n"}]}]},{"type":"element","tag":"h2","props":{"id":"安装pytorch"},"children":[{"type":"text","value":"安装pytorch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果需要换源：换清华源\n"},{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/weixin_42570192/article/details/124760665","rel":["nofollow"]},"children":[{"type":"text","value":"https://blog.csdn.net/weixin_42570192/article/details/124760665"}]}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/\nconda config --set show_channel_urls yes\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/\nconda config --set show_channel_urls yes\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果需要安装cuda"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"yay -S cuda\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yay -S cuda\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里不安装cuda，选择cpu,在官网选择对应的安装命令复制粘贴"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"conda install pytorch torchvision torchaudio cpuonly -c pytorch \n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conda install pytorch torchvision torchaudio cpuonly -c pytorch \n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装好pytorch后"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"import torch\nimport torchvision\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import torch\nimport torchvision\n"}]}]},{"type":"element","tag":"h2","props":{"id":"更多操作命令"},"children":[{"type":"text","value":"更多操作命令"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.csdn.net/qq_38870718/article/details/122796306","rel":["nofollow"]},"children":[{"type":"text","value":"https://blog.csdn.net/qq_38870718/article/details/122796306"}]}]},{"type":"element","tag":"h1","props":{"id":"windows下"},"children":[{"type":"text","value":"Windows下"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"windows在虚拟机里用linux感觉挺卡的，直接用windows算了"}]},{"type":"element","tag":"h2","props":{"id":"安装anaconda-1"},"children":[{"type":"text","value":"安装Anaconda"}]},{"type":"element","tag":"h3","props":{"id":"安装配置"},"children":[{"type":"text","value":"安装配置"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"镜像站：\n"},{"type":"element","tag":"a","props":{"href":"https://repo.anaconda.com/archive/","rel":["nofollow"]},"children":[{"type":"text","value":"https://repo.anaconda.com/archive/"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装后添加环境变量:"}]},{"type":"element","tag":"pre","props":{"className":["language-txt"],"code":"D:\\anaconda3\nD:\\anaconda3\\Scripts\nD:\\anaconda3\\Library\\bin\n","language":"txt","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"D:\\anaconda3\nD:\\anaconda3\\Scripts\nD:\\anaconda3\\Library\\bin\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其中"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"D:\\anaconda3"}]},{"type":"text","value":"是选择的Anaconda安装路径"}]},{"type":"element","tag":"h3","props":{"id":"修改镜像源配置"},"children":[{"type":"text","value":"修改镜像源配置"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"清华源"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"conda config --add channels http://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/win-64/\nconda config --add channels http://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/win-64/\nconda config --set show_channel_urls yes\nconda config --add channels http://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conda config --add channels http://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/win-64/\nconda config --add channels http://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/win-64/\nconda config --set show_channel_urls yes\nconda config --add channels http://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果要恢复原来的默认配置"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"conda config --remove-key channels\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conda config --remove-key channels\n"}]}]},{"type":"element","tag":"h3","props":{"id":"创建虚拟环境"},"children":[{"type":"text","value":"创建虚拟环境"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建环境:\n命令python可以查看python版本，命令exit()退出python环境"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"conda create -n pytorch_cpu python=3.10\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conda create -n pytorch_cpu python=3.10\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"命令python可以查看python版本，命令exit()退出python环境\n激活环境:"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"activate pytorch\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"activate pytorch\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"退出激活环境:"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"deactivate\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"deactivate\n"}]}]},{"type":"element","tag":"h2","props":{"id":"安装pytorch-1"},"children":[{"type":"text","value":"安装pytorch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"官网: "},{"type":"element","tag":"a","props":{"href":"https://pytorch.org/","rel":["nofollow"]},"children":[{"type":"text","value":"https://pytorch.org/"}]},{"type":"text","value":"\n根据环境选择版本，选择stable-windows-conda-python-none，此配置下的安装命令:"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"conda install pytorch torchvision torchaudio cpuonly -c pytorch\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conda install pytorch torchvision torchaudio cpuonly -c pytorch\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"查看已安装的库"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"conda list\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conda list\n"}]}]},{"type":"element","tag":"h2","props":{"id":"编辑器配置-vscode"},"children":[{"type":"text","value":"编辑器配置-vscode"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装python插件，其中包含python相关多个插件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"选择编译环境:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"随便新建一个python文件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"点击右下角python语言模式的右边选择解释器(python.exe)"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"注意:选择的是带'base'的那个！不是带'pytorch'的那个！它的路径应该为你的Anaconda安装根目录下的python.exe，例如D:\\anaconda3\\python.exe"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"至此，环境配置完毕"}]}],"toc":{"title":"","searchDepth":2,"depth":3,"links":[{"id":"安装anaconda","depth":2,"text":"安装Anaconda"},{"id":"创建conda环境","depth":2,"text":"创建conda环境"},{"id":"安装pytorch","depth":2,"text":"安装pytorch"},{"id":"更多操作命令","depth":2,"text":"更多操作命令"},{"id":"安装anaconda-1","depth":2,"text":"安装Anaconda","children":[{"id":"安装配置","depth":3,"text":"安装配置"},{"id":"修改镜像源配置","depth":3,"text":"修改镜像源配置"},{"id":"创建虚拟环境","depth":3,"text":"创建虚拟环境"}]},{"id":"安装pytorch-1","depth":2,"text":"安装pytorch"},{"id":"编辑器配置-vscode","depth":2,"text":"编辑器配置-vscode"}]}},"_type":"markdown","_id":"content:essay:24.pytorch环境.md","_source":"content","_file":"essay/24.pytorch环境.md","_stem":"essay/24.pytorch环境","_extension":"md"}