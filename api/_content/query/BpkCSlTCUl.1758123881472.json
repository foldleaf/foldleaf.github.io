{"_path":"/essay/9.gin-gorm1项目初始化","_dir":"essay","_draft":false,"_partial":false,"_locale":"","title":"1.gin-gorm项目初始化","description":"通过gin-gorm之项目学习部分的学习，可以对项目的架构有深入的了解 🤟\n{% post_link \"gin-gorm1项目准备初始化\" %}\n{% post_link \"gin-gorm2数据库\" %}\n{% post_link \"gin-gorm3错误处理与路由接口\" %}\n{% post_link \"gin-gorm4用户模块接口编写\" %}\n{% post_link \"gin-gorm5密码加密\" %}\n{% post_link \"gin-gorm6编辑、删除用户\" %}","subtitle":"Project initialization","index":9,"date":"2023-02-13 00:00:01","lunar_date":"正月廿三","year":"2023","month":"02","month_en":"Feb","day":"13","tag":"技术","tag_en":"TECH","cover":"/img/rabbit/009.jpg","categories":"gin-gorm之项目学习","body":{"type":"root","children":[{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gin-gorm之项目学习"}]},{"type":"text","value":"部分的学习，可以对项目的架构有深入的了解 🤟\n{% post_link \"gin-gorm1项目准备初始化\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm2数据库\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm3错误处理与路由接口\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm4用户模块接口编写\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm5密码加密\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm6编辑、删除用户\" %}"},{"type":"element","tag":"br","props":{},"children":[]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"顺便说一下hexo中如何做文章跳转，例如上面的目录第一项在 md 中要这么写:\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{% post_link \"gin-gorm1项目准备初始化\" %}<br/>"}]},{"type":"text","value":"\n\"gin-gorm1项目准备初始化\"是 md 文件的名字，而不是 md 中 format 的 title 的名称，显示时会显示 title 的名称"}]},{"type":"element","tag":"h1","props":{"id":"一创建仓库"},"children":[{"type":"text","value":"一、创建仓库"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GitHub 创建项目仓库，git clone拉取项目"}]},{"type":"element","tag":"h1","props":{"id":"二初始化"},"children":[{"type":"text","value":"二、初始化"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"创建main.go文件，在项目根目录下执行"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"go mod init <项目名> \n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"go mod init <项目名> \n"}]}]},{"type":"element","tag":"h1","props":{"id":"三安装gin"},"children":[{"type":"text","value":"三、安装gin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"gin "},{"type":"element","tag":"a","props":{"href":"https://gin-gonic.com/zh-cn/docs/","rel":["nofollow"]},"children":[{"type":"text","value":"官方文档"}]},{"type":"text","value":"\n下载安装：在项目根目录下执行"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"go get -u github.com/gin-gonic/gin\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"go get -u github.com/gin-gonic/gin\n"}]}]},{"type":"element","tag":"h1","props":{"id":"四搭建项目结构"},"children":[{"type":"text","value":"四、搭建项目结构"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"gin是灵活的web框架，不会限制我们的项目结构，所以需要我们自己去建立"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"项目结构如下："}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"config 网站配置、参数等等  \nmodel 数据，读写  \napi(controller) 前后端接口  \nmiddleware 中间件，登录验证、跨域等等  \nroutes 路由接口  \nutils 工具包，实现公用的功能  \nupload 上传下载，托管静态资源  \nweb 前端页面托管  \n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"config 网站配置、参数等等  \nmodel 数据，读写  \napi(controller) 前后端接口  \nmiddleware 中间件，登录验证、跨域等等  \nroutes 路由接口  \nutils 工具包，实现公用的功能  \nupload 上传下载，托管静态资源  \nweb 前端页面托管  \n"}]}]},{"type":"element","tag":"h1","props":{"id":"五网站配置参数"},"children":[{"type":"text","value":"五、网站配置参数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"可以在config文件夹下新建config.go文件，在其中写基本配置参数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不过此处使用"},{"type":"element","tag":"a","props":{"href":"https://ini.unknwon.io/","rel":["nofollow"]},"children":[{"type":"text","value":"go ini"}]},{"type":"text","value":"来进行配置\n安装go ini，在根目录下执行"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"go get gopkg.in/ini.v1\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"go get gopkg.in/ini.v1\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在config文件夹下新建config.ini文件，在其中写网站的基本配置参数\nini写法："}]},{"type":"element","tag":"pre","props":{"className":["language-ini"],"code":"# 注释\n[分区]\nkey=value\n","language":"ini","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# 注释\n[分区]\nkey=value\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"配置如下"}]},{"type":"element","tag":"pre","props":{"className":["language-ini"],"code":"[server]\nAppMode=debug\nHttpPort=:3000\n\n[database]\nDb=postgresql\nDbHost=localhost\nDbPort=5432\nDbUser=postgres\nDbPassword=123456\nDbName=ginblog\n","language":"ini","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[server]\nAppMode=debug\nHttpPort=:3000\n\n[database]\nDb=postgresql\nDbHost=localhost\nDbPort=5432\nDbUser=postgres\nDbPassword=123456\nDbName=ginblog\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在utils下新建setting.go，将config.ini的参数引入并作为全局变量"}]},{"type":"element","tag":"pre","props":{"className":["language-go"],"code":"var (\n    AppMode  string\n    HttpPort string\n\n    Db         string\n    DbHost     string\n    DbPort     string\n    DbUser     string\n    DbPassword string\n    DbName     string\n)\n\nfunc init() {\n    file, err := ini.Load(\"../config/config.ini\")\n    if err != nil {\n        fmt.Println(\"配置文件读取错误，请检查文件路径：\", err)\n    }\n    loadServer(file)\n    loadData(file)\n}\n//加载server配置\nfunc loadServer(file *ini.File) {\n    AppMode = file.Section(\"server\").Key(\"AppMode\").MustString(\"debug\")\n    HttpPort = file.Section(\"server\").Key(\"HttpPort\").MustString(\":3000\")\n}\n//加载database配置\nfunc loadData(file *ini.File) {\n    Db = file.Section(\"database\").Key(\"Db\").MustString(\"postgresql\")\n    DbHost = file.Section(\"database\").Key(\"DbHost\").MustString(\"localhost\")\n    DbPort = file.Section(\"database\").Key(\"DbPort\").MustString(\"5432\")\n    DbUser = file.Section(\"database\").Key(\"DbUser\").MustString(\"postgres\")\n    DbPassword = file.Section(\"database\").Key(\"DbPassword\").MustString(\"123456\")\n    DbName = file.Section(\"database\").Key(\"DbName\").MustString(\"ginblog\")\n}\n\n","language":"go","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"var (\n    AppMode  string\n    HttpPort string\n\n    Db         string\n    DbHost     string\n    DbPort     string\n    DbUser     string\n    DbPassword string\n    DbName     string\n)\n\nfunc init() {\n    file, err := ini.Load(\"../config/config.ini\")\n    if err != nil {\n        fmt.Println(\"配置文件读取错误，请检查文件路径：\", err)\n    }\n    loadServer(file)\n    loadData(file)\n}\n//加载server配置\nfunc loadServer(file *ini.File) {\n    AppMode = file.Section(\"server\").Key(\"AppMode\").MustString(\"debug\")\n    HttpPort = file.Section(\"server\").Key(\"HttpPort\").MustString(\":3000\")\n}\n//加载database配置\nfunc loadData(file *ini.File) {\n    Db = file.Section(\"database\").Key(\"Db\").MustString(\"postgresql\")\n    DbHost = file.Section(\"database\").Key(\"DbHost\").MustString(\"localhost\")\n    DbPort = file.Section(\"database\").Key(\"DbPort\").MustString(\"5432\")\n    DbUser = file.Section(\"database\").Key(\"DbUser\").MustString(\"postgres\")\n    DbPassword = file.Section(\"database\").Key(\"DbPassword\").MustString(\"123456\")\n    DbName = file.Section(\"database\").Key(\"DbName\").MustString(\"ginblog\")\n}\n\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在使用配置参数时调用setting.go，这样做是为了将配置参数抽离出来，当需要更改时只需要更改ini配置文件里面的配置"}]},{"type":"element","tag":"h1","props":{"id":"六路由"},"children":[{"type":"text","value":"六、路由"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在routes文件夹下建立router.go文件,作为路由入口文件"}]},{"type":"element","tag":"pre","props":{"className":["language-go"],"code":"func InitRouter() {\n    gin.SetMode(utils.AppMode)\n    r := gin.Default()\n\n    router := r.Group(\"api/v1\")\n    {\n        router.GET(\"hello\", func(ctx *gin.Context) {\n            ctx.JSON(http.StatusOK, gin.H{\n                \"msg\": \"ok\",\n            })\n        })\n\n    }\n\n    r.Run(utils.HttpPort)\n}\n","language":"go","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"func InitRouter() {\n    gin.SetMode(utils.AppMode)\n    r := gin.Default()\n\n    router := r.Group(\"api/v1\")\n    {\n        router.GET(\"hello\", func(ctx *gin.Context) {\n            ctx.JSON(http.StatusOK, gin.H{\n                \"msg\": \"ok\",\n            })\n        })\n\n    }\n\n    r.Run(utils.HttpPort)\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在main中使用"}]},{"type":"element","tag":"pre","props":{"className":["language-go"],"code":"func main() {\n    routes.InitRouter()\n}\n","language":"go","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"func main() {\n    routes.InitRouter()\n}\n"}]}]},{"type":"element","tag":"h1","props":{"id":"测试"},"children":[{"type":"text","value":"测试"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"运行main.go\n控制台打印"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in \"debug\" mode. Switch to \"release\" mode in production.\n - using env:   export GIN_MODE=release\n - using code:  gin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /api/v1/hello             --> gin-vue-blog/routes.InitRouter.func1 (3 handlers)\n[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.\nPlease check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.\n[GIN-debug] Listening and serving HTTP on :3000\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in \"debug\" mode. Switch to \"release\" mode in production.\n - using env:   export GIN_MODE=release\n - using code:  gin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /api/v1/hello             --> gin-vue-blog/routes.InitRouter.func1 (3 handlers)\n[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.\nPlease check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.\n[GIN-debug] Listening and serving HTTP on :3000\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"浏览器访问 localhost:3000/api/v1/hello\n页面显示"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"{\"msg\":\"ok\"}\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\"msg\":\"ok\"}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"OK,一切正常"}]}],"toc":{"title":"","searchDepth":2,"depth":3,"links":[]}},"_type":"markdown","_id":"content:essay:9.gin-gorm1项目初始化.md","_source":"content","_file":"essay/9.gin-gorm1项目初始化.md","_stem":"essay/9.gin-gorm1项目初始化","_extension":"md"}