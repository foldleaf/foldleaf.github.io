{"_path":"/essay/9.gin-gorm1é¡¹ç›®åˆå§‹åŒ–","_dir":"essay","_draft":false,"_partial":false,"_locale":"","title":"1.gin-gormé¡¹ç›®åˆå§‹åŒ–","description":"é€šè¿‡gin-gormä¹‹é¡¹ç›®å­¦ä¹ éƒ¨åˆ†çš„å­¦ä¹ ï¼Œå¯ä»¥å¯¹é¡¹ç›®çš„æ¶æ„æœ‰æ·±å…¥çš„äº†è§£ ğŸ¤Ÿ\n{% post_link \"gin-gorm1é¡¹ç›®å‡†å¤‡åˆå§‹åŒ–\" %}\n{% post_link \"gin-gorm2æ•°æ®åº“\" %}\n{% post_link \"gin-gorm3é”™è¯¯å¤„ç†ä¸è·¯ç”±æ¥å£\" %}\n{% post_link \"gin-gorm4ç”¨æˆ·æ¨¡å—æ¥å£ç¼–å†™\" %}\n{% post_link \"gin-gorm5å¯†ç åŠ å¯†\" %}\n{% post_link \"gin-gorm6ç¼–è¾‘ã€åˆ é™¤ç”¨æˆ·\" %}","subtitle":"Project initialization","index":9,"date":"2023-02-13 00:00:01","lunar_date":"æ­£æœˆå»¿ä¸‰","year":"2023","month":"02","month_en":"Feb","day":"13","tag":"æŠ€æœ¯","tag_en":"TECH","cover":"/img/rabbit/009.jpg","categories":"gin-gormä¹‹é¡¹ç›®å­¦ä¹ ","body":{"type":"root","children":[{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"é€šè¿‡"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gin-gormä¹‹é¡¹ç›®å­¦ä¹ "}]},{"type":"text","value":"éƒ¨åˆ†çš„å­¦ä¹ ï¼Œå¯ä»¥å¯¹é¡¹ç›®çš„æ¶æ„æœ‰æ·±å…¥çš„äº†è§£ ğŸ¤Ÿ\n{% post_link \"gin-gorm1é¡¹ç›®å‡†å¤‡åˆå§‹åŒ–\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm2æ•°æ®åº“\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm3é”™è¯¯å¤„ç†ä¸è·¯ç”±æ¥å£\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm4ç”¨æˆ·æ¨¡å—æ¥å£ç¼–å†™\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm5å¯†ç åŠ å¯†\" %}"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n{% post_link \"gin-gorm6ç¼–è¾‘ã€åˆ é™¤ç”¨æˆ·\" %}"},{"type":"element","tag":"br","props":{},"children":[]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"é¡ºä¾¿è¯´ä¸€ä¸‹hexoä¸­å¦‚ä½•åšæ–‡ç« è·³è½¬ï¼Œä¾‹å¦‚ä¸Šé¢çš„ç›®å½•ç¬¬ä¸€é¡¹åœ¨ md ä¸­è¦è¿™ä¹ˆå†™:\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{% post_link \"gin-gorm1é¡¹ç›®å‡†å¤‡åˆå§‹åŒ–\" %}<br/>"}]},{"type":"text","value":"\n\"gin-gorm1é¡¹ç›®å‡†å¤‡åˆå§‹åŒ–\"æ˜¯ md æ–‡ä»¶çš„åå­—ï¼Œè€Œä¸æ˜¯ md ä¸­ format çš„ title çš„åç§°ï¼Œæ˜¾ç¤ºæ—¶ä¼šæ˜¾ç¤º title çš„åç§°"}]},{"type":"element","tag":"h1","props":{"id":"ä¸€åˆ›å»ºä»“åº“"},"children":[{"type":"text","value":"ä¸€ã€åˆ›å»ºä»“åº“"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GitHub åˆ›å»ºé¡¹ç›®ä»“åº“ï¼Œgit cloneæ‹‰å–é¡¹ç›®"}]},{"type":"element","tag":"h1","props":{"id":"äºŒåˆå§‹åŒ–"},"children":[{"type":"text","value":"äºŒã€åˆå§‹åŒ–"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"åˆ›å»ºmain.goæ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"go mod init <é¡¹ç›®å> \n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"go mod init <é¡¹ç›®å> \n"}]}]},{"type":"element","tag":"h1","props":{"id":"ä¸‰å®‰è£…gin"},"children":[{"type":"text","value":"ä¸‰ã€å®‰è£…gin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"gin "},{"type":"element","tag":"a","props":{"href":"https://gin-gonic.com/zh-cn/docs/","rel":["nofollow"]},"children":[{"type":"text","value":"å®˜æ–¹æ–‡æ¡£"}]},{"type":"text","value":"\nä¸‹è½½å®‰è£…ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"go get -u github.com/gin-gonic/gin\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"go get -u github.com/gin-gonic/gin\n"}]}]},{"type":"element","tag":"h1","props":{"id":"å››æ­å»ºé¡¹ç›®ç»“æ„"},"children":[{"type":"text","value":"å››ã€æ­å»ºé¡¹ç›®ç»“æ„"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ginæ˜¯çµæ´»çš„webæ¡†æ¶ï¼Œä¸ä¼šé™åˆ¶æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬è‡ªå·±å»å»ºç«‹"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"config ç½‘ç«™é…ç½®ã€å‚æ•°ç­‰ç­‰  \nmodel æ•°æ®ï¼Œè¯»å†™  \napi(controller) å‰åç«¯æ¥å£  \nmiddleware ä¸­é—´ä»¶ï¼Œç™»å½•éªŒè¯ã€è·¨åŸŸç­‰ç­‰  \nroutes è·¯ç”±æ¥å£  \nutils å·¥å…·åŒ…ï¼Œå®ç°å…¬ç”¨çš„åŠŸèƒ½  \nupload ä¸Šä¼ ä¸‹è½½ï¼Œæ‰˜ç®¡é™æ€èµ„æº  \nweb å‰ç«¯é¡µé¢æ‰˜ç®¡  \n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"config ç½‘ç«™é…ç½®ã€å‚æ•°ç­‰ç­‰  \nmodel æ•°æ®ï¼Œè¯»å†™  \napi(controller) å‰åç«¯æ¥å£  \nmiddleware ä¸­é—´ä»¶ï¼Œç™»å½•éªŒè¯ã€è·¨åŸŸç­‰ç­‰  \nroutes è·¯ç”±æ¥å£  \nutils å·¥å…·åŒ…ï¼Œå®ç°å…¬ç”¨çš„åŠŸèƒ½  \nupload ä¸Šä¼ ä¸‹è½½ï¼Œæ‰˜ç®¡é™æ€èµ„æº  \nweb å‰ç«¯é¡µé¢æ‰˜ç®¡  \n"}]}]},{"type":"element","tag":"h1","props":{"id":"äº”ç½‘ç«™é…ç½®å‚æ•°"},"children":[{"type":"text","value":"äº”ã€ç½‘ç«™é…ç½®å‚æ•°"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"å¯ä»¥åœ¨configæ–‡ä»¶å¤¹ä¸‹æ–°å»ºconfig.goæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å†™åŸºæœ¬é…ç½®å‚æ•°"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ä¸è¿‡æ­¤å¤„ä½¿ç”¨"},{"type":"element","tag":"a","props":{"href":"https://ini.unknwon.io/","rel":["nofollow"]},"children":[{"type":"text","value":"go ini"}]},{"type":"text","value":"æ¥è¿›è¡Œé…ç½®\nå®‰è£…go iniï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œ"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"go get gopkg.in/ini.v1\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"go get gopkg.in/ini.v1\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"åœ¨configæ–‡ä»¶å¤¹ä¸‹æ–°å»ºconfig.iniæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å†™ç½‘ç«™çš„åŸºæœ¬é…ç½®å‚æ•°\niniå†™æ³•ï¼š"}]},{"type":"element","tag":"pre","props":{"className":["language-ini"],"code":"# æ³¨é‡Š\n[åˆ†åŒº]\nkey=value\n","language":"ini","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"# æ³¨é‡Š\n[åˆ†åŒº]\nkey=value\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"é…ç½®å¦‚ä¸‹"}]},{"type":"element","tag":"pre","props":{"className":["language-ini"],"code":"[server]\nAppMode=debug\nHttpPort=:3000\n\n[database]\nDb=postgresql\nDbHost=localhost\nDbPort=5432\nDbUser=postgres\nDbPassword=123456\nDbName=ginblog\n","language":"ini","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[server]\nAppMode=debug\nHttpPort=:3000\n\n[database]\nDb=postgresql\nDbHost=localhost\nDbPort=5432\nDbUser=postgres\nDbPassword=123456\nDbName=ginblog\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"åœ¨utilsä¸‹æ–°å»ºsetting.goï¼Œå°†config.iniçš„å‚æ•°å¼•å…¥å¹¶ä½œä¸ºå…¨å±€å˜é‡"}]},{"type":"element","tag":"pre","props":{"className":["language-go"],"code":"var (\n    AppMode  string\n    HttpPort string\n\n    Db         string\n    DbHost     string\n    DbPort     string\n    DbUser     string\n    DbPassword string\n    DbName     string\n)\n\nfunc init() {\n    file, err := ini.Load(\"../config/config.ini\")\n    if err != nil {\n        fmt.Println(\"é…ç½®æ–‡ä»¶è¯»å–é”™è¯¯ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼š\", err)\n    }\n    loadServer(file)\n    loadData(file)\n}\n//åŠ è½½serveré…ç½®\nfunc loadServer(file *ini.File) {\n    AppMode = file.Section(\"server\").Key(\"AppMode\").MustString(\"debug\")\n    HttpPort = file.Section(\"server\").Key(\"HttpPort\").MustString(\":3000\")\n}\n//åŠ è½½databaseé…ç½®\nfunc loadData(file *ini.File) {\n    Db = file.Section(\"database\").Key(\"Db\").MustString(\"postgresql\")\n    DbHost = file.Section(\"database\").Key(\"DbHost\").MustString(\"localhost\")\n    DbPort = file.Section(\"database\").Key(\"DbPort\").MustString(\"5432\")\n    DbUser = file.Section(\"database\").Key(\"DbUser\").MustString(\"postgres\")\n    DbPassword = file.Section(\"database\").Key(\"DbPassword\").MustString(\"123456\")\n    DbName = file.Section(\"database\").Key(\"DbName\").MustString(\"ginblog\")\n}\n\n","language":"go","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"var (\n    AppMode  string\n    HttpPort string\n\n    Db         string\n    DbHost     string\n    DbPort     string\n    DbUser     string\n    DbPassword string\n    DbName     string\n)\n\nfunc init() {\n    file, err := ini.Load(\"../config/config.ini\")\n    if err != nil {\n        fmt.Println(\"é…ç½®æ–‡ä»¶è¯»å–é”™è¯¯ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼š\", err)\n    }\n    loadServer(file)\n    loadData(file)\n}\n//åŠ è½½serveré…ç½®\nfunc loadServer(file *ini.File) {\n    AppMode = file.Section(\"server\").Key(\"AppMode\").MustString(\"debug\")\n    HttpPort = file.Section(\"server\").Key(\"HttpPort\").MustString(\":3000\")\n}\n//åŠ è½½databaseé…ç½®\nfunc loadData(file *ini.File) {\n    Db = file.Section(\"database\").Key(\"Db\").MustString(\"postgresql\")\n    DbHost = file.Section(\"database\").Key(\"DbHost\").MustString(\"localhost\")\n    DbPort = file.Section(\"database\").Key(\"DbPort\").MustString(\"5432\")\n    DbUser = file.Section(\"database\").Key(\"DbUser\").MustString(\"postgres\")\n    DbPassword = file.Section(\"database\").Key(\"DbPassword\").MustString(\"123456\")\n    DbName = file.Section(\"database\").Key(\"DbName\").MustString(\"ginblog\")\n}\n\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"åœ¨ä½¿ç”¨é…ç½®å‚æ•°æ—¶è°ƒç”¨setting.goï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†å°†é…ç½®å‚æ•°æŠ½ç¦»å‡ºæ¥ï¼Œå½“éœ€è¦æ›´æ”¹æ—¶åªéœ€è¦æ›´æ”¹inié…ç½®æ–‡ä»¶é‡Œé¢çš„é…ç½®"}]},{"type":"element","tag":"h1","props":{"id":"å…­è·¯ç”±"},"children":[{"type":"text","value":"å…­ã€è·¯ç”±"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"åœ¨routesæ–‡ä»¶å¤¹ä¸‹å»ºç«‹router.goæ–‡ä»¶,ä½œä¸ºè·¯ç”±å…¥å£æ–‡ä»¶"}]},{"type":"element","tag":"pre","props":{"className":["language-go"],"code":"func InitRouter() {\n    gin.SetMode(utils.AppMode)\n    r := gin.Default()\n\n    router := r.Group(\"api/v1\")\n    {\n        router.GET(\"hello\", func(ctx *gin.Context) {\n            ctx.JSON(http.StatusOK, gin.H{\n                \"msg\": \"ok\",\n            })\n        })\n\n    }\n\n    r.Run(utils.HttpPort)\n}\n","language":"go","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"func InitRouter() {\n    gin.SetMode(utils.AppMode)\n    r := gin.Default()\n\n    router := r.Group(\"api/v1\")\n    {\n        router.GET(\"hello\", func(ctx *gin.Context) {\n            ctx.JSON(http.StatusOK, gin.H{\n                \"msg\": \"ok\",\n            })\n        })\n\n    }\n\n    r.Run(utils.HttpPort)\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"åœ¨mainä¸­ä½¿ç”¨"}]},{"type":"element","tag":"pre","props":{"className":["language-go"],"code":"func main() {\n    routes.InitRouter()\n}\n","language":"go","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"func main() {\n    routes.InitRouter()\n}\n"}]}]},{"type":"element","tag":"h1","props":{"id":"æµ‹è¯•"},"children":[{"type":"text","value":"æµ‹è¯•"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"è¿è¡Œmain.go\næ§åˆ¶å°æ‰“å°"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in \"debug\" mode. Switch to \"release\" mode in production.\n - using env:   export GIN_MODE=release\n - using code:  gin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /api/v1/hello             --> gin-vue-blog/routes.InitRouter.func1 (3 handlers)\n[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.\nPlease check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.\n[GIN-debug] Listening and serving HTTP on :3000\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in \"debug\" mode. Switch to \"release\" mode in production.\n - using env:   export GIN_MODE=release\n - using code:  gin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /api/v1/hello             --> gin-vue-blog/routes.InitRouter.func1 (3 handlers)\n[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.\nPlease check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.\n[GIN-debug] Listening and serving HTTP on :3000\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"æµè§ˆå™¨è®¿é—® localhost:3000/api/v1/hello\né¡µé¢æ˜¾ç¤º"}]},{"type":"element","tag":"pre","props":{"className":["language-bash"],"code":"{\"msg\":\"ok\"}\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\"msg\":\"ok\"}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"OK,ä¸€åˆ‡æ­£å¸¸"}]}],"toc":{"title":"","searchDepth":2,"depth":3,"links":[]}},"_type":"markdown","_id":"content:essay:9.gin-gorm1é¡¹ç›®åˆå§‹åŒ–.md","_source":"content","_file":"essay/9.gin-gorm1é¡¹ç›®åˆå§‹åŒ–.md","_stem":"essay/9.gin-gorm1é¡¹ç›®åˆå§‹åŒ–","_extension":"md"}